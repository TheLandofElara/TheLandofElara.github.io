<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoFleet 2025 - Bus Company Awards</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #000000 100%);
        }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(255, 255, 255, 0.1);
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .voting-card {
            background: linear-gradient(145deg, #1a1a1a, #0f0f0f);
            border: 1px solid #333;
        }
        
        .category-badge {
            background: linear-gradient(45deg, #ffffff, #f0f0f0);
            color: #000;
        }
        
        .hidden { display: none; }
        .active { display: block; }
        
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
    </style>
</head>
<body class="gradient-bg min-h-screen text-white">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full z-50 bg-black bg-opacity-90 backdrop-blur-md border-b border-gray-800">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div class="text-2xl font-bold animate__animated animate__fadeInLeft">
                    RoFleet <span class="text-gray-400">2025</span>
                </div>
                <div class="hidden md:flex space-x-8">
                    <button onclick="showPage('home')" class="nav-link hover:text-gray-300 transition-colors">Home</button>
                    <button onclick="showPage('categories')" class="nav-link hover:text-gray-300 transition-colors">Vote</button>
                    <button onclick="showPage('results')" class="nav-link hover:text-gray-300 transition-colors">Live Results</button>
                    <button onclick="showPage('leaderboard')" class="nav-link hover:text-gray-300 transition-colors">Leaderboard</button>
                </div>
                <div class="md:hidden">
                    <button onclick="toggleMobileMenu()" class="text-white">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
        <div id="mobileMenu" class="hidden md:hidden bg-black">
            <div class="px-6 py-4 space-y-2">
                <button onclick="showPage('home')" class="block w-full text-left hover:text-gray-300 transition-colors">Home</button>
                <button onclick="showPage('categories')" class="block w-full text-left hover:text-gray-300 transition-colors">Vote</button>
                <button onclick="showPage('results')" class="block w-full text-left hover:text-gray-300 transition-colors">Live Results</button>
                <button onclick="showPage('leaderboard')" class="block w-full text-left hover:text-gray-300 transition-colors">Leaderboard</button>
            </div>
        </div>
    </nav>

    <!-- Home Page -->
    <div id="homePage" class="page active pt-20">
        <div class="container mx-auto px-6 py-12">
            <div class="text-center mb-16 animate__animated animate__fadeInUp">
                <h1 class="text-6xl font-bold mb-6">RoFleet 2025</h1>
                <p class="text-xl text-gray-300 mb-8 max-w-3xl mx-auto">
                    The ultimate bus company awards event. Vote for your favorite companies across multiple categories and see who comes out on top!
                </p>
                <button onclick="showPage('categories')" class="bg-white text-black px-8 py-4 rounded-lg font-semibold hover:bg-gray-200 transition-all transform hover:scale-105 animate__animated animate__pulse animate__infinite">
                    Start Voting Now
                </button>
            </div>

            <div class="grid md:grid-cols-3 gap-8 mb-16">
                <div class="text-center p-8 voting-card rounded-xl card-hover animate__animated animate__fadeInUp animate__delay-1s">
                    <div class="text-4xl mb-4">üöå</div>
                    <h3 class="text-xl font-semibold mb-4">Multiple Categories</h3>
                    <p class="text-gray-400">Vote across various categories like Best Service, Most Reliable, and Best Design</p>
                </div>
                <div class="text-center p-8 voting-card rounded-xl card-hover animate__animated animate__fadeInUp animate__delay-2s">
                    <div class="text-4xl mb-4">üìä</div>
                    <h3 class="text-xl font-semibold mb-4">Live Results</h3>
                    <p class="text-gray-400">Watch the competition unfold with real-time voting results and leaderboards</p>
                </div>
                <div class="text-center p-8 voting-card rounded-xl card-hover animate__animated animate__fadeInUp animate__delay-3s">
                    <div class="text-4xl mb-4">üèÜ</div>
                    <h3 class="text-xl font-semibold mb-4">Fair Competition</h3>
                    <p class="text-gray-400">Every vote counts equally in determining the winners of each category</p>
                </div>
            </div>

            <div class="text-center">
                <h2 class="text-3xl font-bold mb-8">Event Statistics</h2>
                <div class="grid md:grid-cols-4 gap-6">
                    <div class="p-6 voting-card rounded-xl">
                        <div class="text-2xl font-bold" id="totalVotes">0</div>
                        <div class="text-gray-400">Total Votes</div>
                    </div>
                    <div class="p-6 voting-card rounded-xl">
                        <div class="text-2xl font-bold" id="totalCompanies">0</div>
                        <div class="text-gray-400">Companies</div>
                    </div>
                    <div class="p-6 voting-card rounded-xl">
                        <div class="text-2xl font-bold">6</div>
                        <div class="text-gray-400">Categories</div>
                    </div>
                    <div class="p-6 voting-card rounded-xl">
                        <div class="text-2xl font-bold pulse-animation">LIVE</div>
                        <div class="text-gray-400">Status</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Categories Page -->
    <div id="categoriesPage" class="page hidden pt-20">
        <div class="container mx-auto px-6 py-12">
            <div class="text-center mb-12 animate__animated animate__fadeInDown">
                <h1 class="text-4xl font-bold mb-4">Vote by Category</h1>
                <p class="text-xl text-gray-300">Choose a category to cast your vote</p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                <div class="voting-card rounded-xl p-8 card-hover cursor-pointer animate__animated animate__fadeInUp" onclick="showVotingModal('Best Overall Service')">
                    <div class="text-center">
                        <div class="text-4xl mb-4">üåü</div>
                        <h3 class="text-xl font-semibold mb-2">Best Overall Service</h3>
                        <p class="text-gray-400 mb-4">Vote for the company with the best overall customer service</p>
                        <div class="category-badge px-4 py-2 rounded-full text-sm font-medium">Click to Vote</div>
                    </div>
                </div>

                <div class="voting-card rounded-xl p-8 card-hover cursor-pointer animate__animated animate__fadeInUp animate__delay-1s" onclick="showVotingModal('Most Reliable')">
                    <div class="text-center">
                        <div class="text-4xl mb-4">‚è±Ô∏è</div>
                        <h3 class="text-xl font-semibold mb-2">Most Reliable</h3>
                        <p class="text-gray-400 mb-4">The company you can always count on for punctuality</p>
                        <div class="category-badge px-4 py-2 rounded-full text-sm font-medium">Click to Vote</div>
                    </div>
                </div>

                <div class="voting-card rounded-xl p-8 card-hover cursor-pointer animate__animated animate__fadeInUp animate__delay-2s" onclick="showVotingModal('Best Bus Design')">
                    <div class="text-center">
                        <div class="text-4xl mb-4">üé®</div>
                        <h3 class="text-xl font-semibold mb-2">Best Bus Design</h3>
                        <p class="text-gray-400 mb-4">Most aesthetically pleasing and functional bus design</p>
                        <div class="category-badge px-4 py-2 rounded-full text-sm font-medium">Click to Vote</div>
                    </div>
                </div>

                <div class="voting-card rounded-xl p-8 card-hover cursor-pointer animate__animated animate__fadeInUp animate__delay-3s" onclick="showVotingModal('Most Innovative')">
                    <div class="text-center">
                        <div class="text-4xl mb-4">üí°</div>
                        <h3 class="text-xl font-semibold mb-2">Most Innovative</h3>
                        <p class="text-gray-400 mb-4">Leading the way with new technologies and features</p>
                        <div class="category-badge px-4 py-2 rounded-full text-sm font-medium">Click to Vote</div>
                    </div>
                </div>

                <div class="voting-card rounded-xl p-8 card-hover cursor-pointer animate__animated animate__fadeInUp animate__delay-4s" onclick="showVotingModal('Best Value for Money')">
                    <div class="text-center">
                        <div class="text-4xl mb-4">üí∞</div>
                        <h3 class="text-xl font-semibold mb-2">Best Value for Money</h3>
                        <p class="text-gray-400 mb-4">Excellent service at the most reasonable price</p>
                        <div class="category-badge px-4 py-2 rounded-full text-sm font-medium">Click to Vote</div>
                    </div>
                </div>

                <div class="voting-card rounded-xl p-8 card-hover cursor-pointer animate__animated animate__fadeInUp animate__delay-5s" onclick="showVotingModal('Most Eco-Friendly')">
                    <div class="text-center">
                        <div class="text-4xl mb-4">üå±</div>
                        <h3 class="text-xl font-semibold mb-2">Most Eco-Friendly</h3>
                        <p class="text-gray-400 mb-4">Leading environmental sustainability efforts</p>
                        <div class="category-badge px-4 py-2 rounded-full text-sm font-medium">Click to Vote</div>
                    </div>
                </div>
            </div>

            <div class="text-center mt-12">
                <div class="bg-gray-800 rounded-lg p-6 max-w-md mx-auto">
                    <h3 class="text-lg font-semibold mb-2">Add New Company</h3>
                    <div class="flex gap-2">
                        <input type="text" id="newCompanyName" placeholder="Company Name" class="flex-1 px-4 py-2 bg-gray-700 rounded-lg text-white">
                        <button onclick="addNewCompany()" class="bg-white text-black px-6 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors">Add</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Page -->
    <div id="resultsPage" class="page hidden pt-20">
        <div class="container mx-auto px-6 py-12">
            <div class="text-center mb-12 animate__animated animate__fadeInDown">
                <h1 class="text-4xl font-bold mb-4">Live Results</h1>
                <p class="text-xl text-gray-300">Real-time voting results across all categories</p>
            </div>

            <div id="resultsContainer" class="space-y-8">
                <!-- Results will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Leaderboard Page -->
    <div id="leaderboardPage" class="page hidden pt-20">
        <div class="container mx-auto px-6 py-12">
            <div class="text-center mb-12 animate__animated animate__fadeInDown">
                <h1 class="text-4xl font-bold mb-4">Overall Leaderboard</h1>
                <p class="text-xl text-gray-300">Companies ranked by total votes across all categories</p>
            </div>

            <div class="max-w-4xl mx-auto">
                <div id="leaderboardContainer" class="space-y-4">
                    <!-- Leaderboard will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <!-- Voting Modal -->
    <div id="votingModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-900 rounded-xl p-8 max-w-2xl w-full mx-4 max-h-96 overflow-y-auto animate__animated animate__zoomIn">
            <div class="flex justify-between items-center mb-6">
                <h2 id="modalTitle" class="text-2xl font-bold">Vote for Category</h2>
                <button onclick="closeVotingModal()" class="text-gray-400 hover:text-white text-2xl">&times;</button>
            </div>
            <div id="companiesList" class="space-y-3">
                <!-- Companies will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-900 rounded-xl p-8 max-w-md w-full mx-4 text-center animate__animated animate__bounceIn">
            <div class="text-4xl mb-4">‚úÖ</div>
            <h2 class="text-2xl font-bold mb-4">Vote Submitted!</h2>
            <p class="text-gray-300 mb-6">Thank you for your vote. Your opinion matters!</p>
            <button onclick="closeSuccessModal()" class="bg-white text-black px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-colors">Continue Voting</button>
        </div>
    </div>

    <script>
        // Global state
        let companies = [
            "Metro Transit Co.",
            "City Bus Lines",
            "Express Travel",
            "Urban Riders",
            "Swift Transport",
            "Green Line Buses",
            "Royal Coach Services",
            "Galaxy Transit"
        ];

        let votes = {};
        let currentCategory = '';

        // Initialize voting data structure
        const categories = [
            'Best Overall Service',
            'Most Reliable',
            'Best Bus Design',
            'Most Innovative',
            'Best Value for Money',
            'Most Eco-Friendly'
        ];

        // Initialize votes object
        categories.forEach(category => {
            votes[category] = {};
            companies.forEach(company => {
                votes[category][company] = 0;
            });
        });

        // Webhook URL - Replace with your actual webhook URL
        const WEBHOOK_URL = 'https://discord.com/api/webhooks/1391946446617579654/9FevCQ215yfDXox2KVtAMyjELhfzlRKi0KUl1DQPbwsM6bgshqNnKWQKm9jE1sl6TAgR';

        // Navigation functions
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
                page.classList.add('hidden');
            });
            
            document.getElementById(pageId + 'Page').classList.remove('hidden');
            document.getElementById(pageId + 'Page').classList.add('active');
            
            if (pageId === 'results') {
                updateResults();
            } else if (pageId === 'leaderboard') {
                updateLeaderboard();
            }
            
            // Close mobile menu
            document.getElementById('mobileMenu').classList.add('hidden');
            
            // Update stats on home page
            if (pageId === 'home') {
                updateStats();
            }
        }

        function toggleMobileMenu() {
            const menu = document.getElementById('mobileMenu');
            menu.classList.toggle('hidden');
        }

        // Voting modal functions
        function showVotingModal(category) {
            currentCategory = category;
            document.getElementById('modalTitle').textContent = `Vote for ${category}`;
            
            const companiesList = document.getElementById('companiesList');
            companiesList.innerHTML = '';
            
            companies.forEach(company => {
                const companyDiv = document.createElement('div');
                companyDiv.className = 'flex items-center justify-between p-4 bg-gray-800 rounded-lg hover:bg-gray-700 transition-colors cursor-pointer';
                companyDiv.onclick = () => vote(category, company);
                
                companyDiv.innerHTML = `
                    <div class="flex items-center">
                        <div class="w-12 h-12 bg-gradient-to-r from-gray-600 to-gray-500 rounded-full flex items-center justify-center mr-4">
                            <span class="text-lg font-bold">${company.charAt(0)}</span>
                        </div>
                        <div>
                            <h3 class="font-semibold">${company}</h3>
                            <p class="text-sm text-gray-400">${votes[category][company] || 0} votes</p>
                        </div>
                    </div>
                    <button class="bg-white text-black px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors">
                        Vote
                    </button>
                `;
                
                companiesList.appendChild(companyDiv);
            });
            
            document.getElementById('votingModal').classList.remove('hidden');
        }

        function closeVotingModal() {
            document.getElementById('votingModal').classList.add('hidden');
        }

        function closeSuccessModal() {
            document.getElementById('successModal').classList.add('hidden');
        }

        // Voting function
        async function vote(category, company) {
            try {
                // Update local vote count
                votes[category][company]++;
                
                // Prepare data for webhook
                const voteData = {
                    timestamp: new Date().toISOString(),
                    category: category,
                    company: company,
                    event: 'RoFleet 2025',
                    totalVotes: Object.values(votes[category]).reduce((a, b) => a + b, 0)
                };

                // Send to webhook
                await fetch(WEBHOOK_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(voteData)
                });

                closeVotingModal();
                document.getElementById('successModal').classList.remove('hidden');
                
                // Update results if on results page
                if (document.getElementById('resultsPage').classList.contains('active')) {
                    updateResults();
                }
            } catch (error) {
                console.error('Error sending vote:', error);
                // Still update local state even if webhook fails
                closeVotingModal();
                document.getElementById('successModal').classList.remove('hidden');
            }
        }

        // Add new company function
        function addNewCompany() {
            const input = document.getElementById('newCompanyName');
            const companyName = input.value.trim();
            
            if (companyName && !companies.includes(companyName)) {
                companies.push(companyName);
                
                // Add to all categories
                categories.forEach(category => {
                    votes[category][companyName] = 0;
                });
                
                input.value = '';
                
                // Show success animation
                input.style.backgroundColor = '#065f46';
                setTimeout(() => {
                    input.style.backgroundColor = '#374151';
                }, 1000);
                
                updateStats();
            }
        }

        // Results functions
        function updateResults() {
            const container = document.getElementById('resultsContainer');
            container.innerHTML = '';
            
            categories.forEach((category, index) => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = `voting-card rounded-xl p-6 animate__animated animate__fadeInUp`;
                categoryDiv.style.animationDelay = `${index * 0.1}s`;
                
                const sortedCompanies = Object.entries(votes[category])
                    .sort(([,a], [,b]) => b - a)
                    .slice(0, 5);
                
                const totalVotes = Object.values(votes[category]).reduce((a, b) => a + b, 0);
                
                categoryDiv.innerHTML = `
                    <h3 class="text-xl font-semibold mb-4">${category}</h3>
                    <p class="text-gray-400 mb-4">Total votes: ${totalVotes}</p>
                    <div class="space-y-3">
                        ${sortedCompanies.map(([company, voteCount], idx) => {
                            const percentage = totalVotes > 0 ? (voteCount / totalVotes * 100) : 0;
                            return `
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center flex-1">
                                        <span class="text-sm font-medium w-6">${idx + 1}.</span>
                                        <span class="ml-2 flex-1">${company}</span>
                                        <span class="text-sm text-gray-400">${voteCount} votes</span>
                                    </div>
                                </div>
                                <div class="w-full bg-gray-700 rounded-full h-2">
                                    <div class="bg-white h-2 rounded-full progress-bar" style="width: ${percentage}%"></div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;
                
                container.appendChild(categoryDiv);
            });
        }

        // Leaderboard functions
        function updateLeaderboard() {
            const container = document.getElementById('leaderboardContainer');
            container.innerHTML = '';
            
            // Calculate total votes for each company
            const companyTotals = {};
            companies.forEach(company => {
                companyTotals[company] = categories.reduce((total, category) => {
                    return total + (votes[category][company] || 0);
                }, 0);
            });
            
            const sortedCompanies = Object.entries(companyTotals)
                .sort(([,a], [,b]) => b - a)
                .slice(0, 10);
            
            sortedCompanies.forEach(([company, totalVotes], index) => {
                const companyDiv = document.createElement('div');
                companyDiv.className = `flex items-center justify-between p-6 voting-card rounded-xl animate__animated animate__fadeInLeft`;
                companyDiv.style.animationDelay = `${index * 0.1}s`;
                
                const rankColors = ['text-yellow-400', 'text-gray-300', 'text-yellow-600'];
                const rankColor = index < 3 ? rankColors[index] : 'text-gray-400';
                
                companyDiv.innerHTML = `
                    <div class="flex items-center">
                        <div class="text-2xl font-bold ${rankColor} w-12">#${index + 1}</div>
                        <div class="w-12 h-12 bg-gradient-to-r from-gray-600 to-gray-500 rounded-full flex items-center justify-center mr-4">
                            <span class="text-lg font-bold">${company.charAt(0)}</span>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg">${company}</h3>
                            <p class="text-gray-400">Total across all categories</p>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-2xl font-bold">${totalVotes}</div>
                        <div class="text-gray-400">votes</div>
                    </div>
                `;
                
                container.appendChild(companyDiv);
            });
        }

        // Stats update function
        function updateStats() {
            const totalVotes = categories.reduce((total, category) => {
                return total + Object.values(votes[category]).reduce((a, b) => a + b, 0);
            }, 0);
            
            document.getElementById('totalVotes').textContent = totalVotes.toLocaleString();
            document.getElementById('totalCompanies').textContent = companies.length;
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            updateStats();
            
            // Add some sample votes for demonstration
            setTimeout(() => {
                votes['Best Overall Service']['Metro Transit Co.'] = 15;
                votes['Best Overall Service']['City Bus Lines'] = 12;
                votes['Most Reliable']['Express Travel'] = 18;
                votes['Best Bus Design']['Urban Riders'] = 10;
                updateStats();
            }, 1000);
        });

        // Auto-refresh results every 30 seconds if on results page
        setInterval(() => {
            if (document.getElementById('resultsPage').classList.contains('active')) {
                updateResults();
            }
            if (document.getElementById('leaderboardPage').classList.contains('active')) {
                updateLeaderboard();
            }
            updateStats();
        }, 30000);
    </script>
</body>
</html>
